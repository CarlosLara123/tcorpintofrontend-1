{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\Desarrollo\\\\Desktop\\\\Proyectos\\\\Proyectospropios\\\\Tcorpinto\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\Desarrollo\\\\Desktop\\\\Proyectos\\\\Proyectospropios\\\\Tcorpinto\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"C:\\\\Users\\\\Desarrollo\\\\Desktop\\\\Proyectos\\\\Proyectospropios\\\\Tcorpinto\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\Desarrollo\\\\Desktop\\\\Proyectos\\\\Proyectospropios\\\\Tcorpinto\\\\frontend\\\\src\\\\pages\\\\auth\\\\Login.js\";\nimport React, { useState } from 'react';\nimport { useHistory } from \"react-router-dom\";\nimport GoogleLogin from 'react-google-login';\nimport Swal from 'sweetalert2';\nimport { MDBContainer, MDBRow, MDBCol, MDBInput, MDBBtn } from 'mdbreact'; //Complements\n\nimport SectionContainer from '../../components/sectionContainer';\nimport Layaout from '../parcials/Layaout'; //Css\n\nimport './Login.css'; //Functions\n\nimport { login, login_google } from '../../functions/UserFunctions';\n\nconst Login = () => {\n  const clientId = process.env.REACT_APP_GOOGLE_ID;\n  const history = useHistory();\n\n  const _useState = useState(),\n        _useState2 = _slicedToArray(_useState, 2),\n        user = _useState2[0],\n        setUser = _useState2[1];\n\n  const _useState3 = useState(),\n        _useState4 = _slicedToArray(_useState3, 2),\n        password = _useState4[0],\n        setPassword = _useState4[1];\n\n  const _Login = () => {\n    const userData = {\n      user: user,\n      password: password\n    };\n    login(userData).then( /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(res) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              if (res.error === 1) {\n                Swal.fire('Oops...', res.message, 'error');\n              } else {\n                localStorage.setItem('identity', JSON.stringify(res.response.data.user));\n                localStorage.setItem('token', JSON.stringify(res.response.data.token));\n                localStorage.setItem('session', true);\n                history.push(\"/bitacoras\");\n              }\n\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n  };\n\n  const onChangeUser = e => {\n    setUser(e.target.value);\n  };\n\n  const onChangePassword = e => {\n    setPassword(e.target.value);\n  };\n\n  const responseGoogle = response => {\n    if (typeof response.profileObj !== \"undefined\") {\n      const userData = {\n        email: response.profileObj.email\n      };\n      login_google(userData).then(res => {\n        if (res.error === 1) {\n          Swal.fire('Oops...', res.message, 'error');\n        } else {\n          history.push(\"/bitacoras\");\n        }\n      });\n    } else {\n      Swal.fire('Oops... Tenemos problemas con google', 'prueba con el login normal o informa a IT', 'error');\n    }\n  };\n\n  if (localStorage.getItem('session')) {\n    history.push(\"/bitacoras\");\n  }\n\n  return /*#__PURE__*/React.createElement(Layaout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(MDBContainer, {\n    className: \"mt-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(SectionContainer, {\n    noBorder: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(MDBRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(MDBCol, {\n    className: \"card-login\",\n    md: \"6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(SectionContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"h5 text-center mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 37\n    }\n  }, \"Iniciar Sesi\\xF3n\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"grey-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(MDBInput, {\n    label: \"Ingrese usuario\",\n    icon: \"user\",\n    group: true,\n    type: \"text\",\n    validate: true,\n    error: \"wrong\",\n    success: \"right\",\n    name: \"user\",\n    onChange: onChangeUser,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 41\n    }\n  }), /*#__PURE__*/React.createElement(MDBInput, {\n    label: \"Ingrese Contrase\\xF1a\",\n    icon: \"lock\",\n    group: true,\n    type: \"password\",\n    name: \"password\",\n    onChange: onChangePassword,\n    validate: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 41\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(MDBBtn, {\n    color: \"info\",\n    onClick: _Login,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 41\n    }\n  }, \"Ingresar\"), /*#__PURE__*/React.createElement(GoogleLogin, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 41\n    }\n  })))))))));\n};\n\nexport default Login;","map":{"version":3,"sources":["C:/Users/Desarrollo/Desktop/Proyectos/Proyectospropios/Tcorpinto/frontend/src/pages/auth/Login.js"],"names":["React","useState","useHistory","GoogleLogin","Swal","MDBContainer","MDBRow","MDBCol","MDBInput","MDBBtn","SectionContainer","Layaout","login","login_google","Login","clientId","process","env","REACT_APP_GOOGLE_ID","history","user","setUser","password","setPassword","_Login","userData","then","res","error","fire","message","localStorage","setItem","JSON","stringify","response","data","token","push","onChangeUser","e","target","value","onChangePassword","responseGoogle","profileObj","email","getItem"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\r\nimport { useHistory } from \"react-router-dom\";\r\nimport GoogleLogin from 'react-google-login';\r\nimport Swal from 'sweetalert2'\r\nimport {\r\n    MDBContainer,\r\n    MDBRow,\r\n    MDBCol,\r\n    MDBInput,\r\n    MDBBtn\r\n} from 'mdbreact';\r\n\r\n//Complements\r\nimport SectionContainer from '../../components/sectionContainer';\r\nimport Layaout from '../parcials/Layaout'\r\n//Css\r\nimport './Login.css'\r\n\r\n//Functions\r\nimport { login,login_google } from '../../functions/UserFunctions';\r\n\r\nconst Login = () => {\r\n    \r\n    const clientId = process.env.REACT_APP_GOOGLE_ID;\r\n\r\n    const history = useHistory();\r\n    const [user, setUser] = useState();\r\n    const [password, setPassword] = useState();\r\n\r\n    const _Login = () => {\r\n\r\n        const userData = {\r\n            user: user,\r\n            password: password\r\n        }\r\n\r\n        login(userData).then(async res => {\r\n            if (res.error === 1) {\r\n                Swal.fire('Oops...', res.message, 'error');\r\n            } else {\r\n                localStorage.setItem('identity', JSON.stringify(res.response.data.user));\r\n                localStorage.setItem('token', JSON.stringify(res.response.data.token));\r\n                localStorage.setItem('session',true);\r\n                history.push(`/bitacoras`);\r\n            }\r\n        })\r\n    }\r\n\r\n    const onChangeUser = e => {\r\n        setUser(e.target.value);\r\n    }\r\n\r\n    const onChangePassword = e => {\r\n        setPassword(e.target.value);\r\n    }\r\n\r\n    const responseGoogle = (response) => {\r\n        if(typeof response.profileObj !== \"undefined\"){\r\n            const userData = {\r\n                email: response.profileObj.email,\r\n            }\r\n\r\n            login_google(userData).then(res => {\r\n                if (res.error === 1) {\r\n                    Swal.fire('Oops...', res.message, 'error');\r\n                } else {\r\n                    history.push(`/bitacoras`);\r\n                }\r\n            })\r\n        }else{\r\n            Swal.fire('Oops... Tenemos problemas con google','prueba con el login normal o informa a IT', 'error');\r\n        }\r\n      }\r\n\r\n    if (localStorage.getItem('session')) {\r\n        history.push(`/bitacoras`);\r\n    }\r\n\r\n    return (\r\n        <Layaout>\r\n            <MDBContainer className='mt-5'>\r\n                <SectionContainer noBorder>\r\n                    <MDBRow>\r\n                        <MDBCol className=\"card-login\" md='6'>\r\n                            <SectionContainer>\r\n                                <form>\r\n                                    <p className='h5 text-center mb-4'>Iniciar Sesión</p>\r\n                                    <div className='grey-text'>\r\n                                        <MDBInput\r\n                                            label='Ingrese usuario'\r\n                                            icon='user'\r\n                                            group\r\n                                            type='text'\r\n                                            validate\r\n                                            error='wrong'\r\n                                            success='right'\r\n                                            name='user'\r\n                                            onChange={onChangeUser}\r\n                                        />\r\n                                        <MDBInput\r\n                                            label='Ingrese Contraseña'\r\n                                            icon='lock'\r\n                                            group\r\n                                            type='password'\r\n                                            name='password'\r\n                                            onChange={onChangePassword}\r\n                                            validate\r\n                                        />\r\n                                    </div>\r\n                                    <div className='text-center'>\r\n                                        <MDBBtn color=\"info\" onClick={_Login}>Ingresar</MDBBtn>\r\n                                        <GoogleLogin\r\n                                          \r\n                                        />\r\n                                    </div>\r\n                                </form>\r\n                            </SectionContainer>\r\n                        </MDBCol>\r\n                    </MDBRow>\r\n                </SectionContainer>\r\n            </MDBContainer>\r\n            </Layaout>\r\n    )\r\n}\r\n\r\nexport default Login"]},"metadata":{},"sourceType":"module"}